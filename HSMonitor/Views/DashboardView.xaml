<UserControl
    x:Class="HSMonitor.Views.DashboardView"
    xmlns:viewModels="clr-namespace:HSMonitor.ViewModels"
    xmlns:local="clr-namespace:HSMonitor.Views"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="320"
    d:DesignWidth="240"
    d:DataContext="{d:DesignInstance Type=viewModels:DashboardViewModel}"
    mc:Ignorable="d">
    <UserControl.Resources>
        <local:BooleanToVisibilityConverterEx x:Key="BoolToVis"/>

        <Style TargetType="{x:Type Border}">
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="BorderBrush" Value="Gray"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <Style TargetType="{x:Type Path}">
            <Setter Property="Fill" Value="Gray"/>
        </Style>

        <Style TargetType="{x:Type Polygon}">
            <Setter Property="Fill" Value="Gray"/>
        </Style>

        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="FontFamily" Value="{DynamicResource org_01}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontSize" Value="34"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <!-- Reusable circular marquee used for "+0 MHz" and BOOST ribbons -->
        <Style TargetType="{x:Type local:MarqueeText}">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="{DynamicResource org_01}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Speed" Value="55"/>
            <Setter Property="Gap" Value="18"/>
            <Setter Property="Padding" Value="6,0,6,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:MarqueeText}">
                        <Border CornerRadius="4"
                                BorderBrush="Gray"
                                BorderThickness="1"
                                Background="{TemplateBinding Background}">
                            <Grid ClipToBounds="True" Margin="{TemplateBinding Padding}">
                                <Canvas x:Name="PART_Canvas">
                                    <TextBlock x:Name="PART_Text1"
                                               Text="{TemplateBinding Text}"
                                               Foreground="{TemplateBinding Foreground}"
                                               FontFamily="{TemplateBinding FontFamily}"
                                               FontSize="{TemplateBinding FontSize}"/>
                                    <TextBlock x:Name="PART_Text2"
                                               Text="{TemplateBinding Text}"
                                               Foreground="{TemplateBinding Foreground}"
                                               FontFamily="{TemplateBinding FontFamily}"
                                               FontSize="{TemplateBinding FontSize}"/>
                                </Canvas>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Canvas Opacity="{Binding DisplayOpacity}" Background="Black">

        <Border Canvas.Top="0"   Canvas.Left="0" Width="240" Height="120"/>
        <Border Canvas.Top="122" Canvas.Left="0" Width="240" Height="138"/>
        <Border Canvas.Top="262" Canvas.Left="0" Width="240" Height="55"/>

        <Border Canvas.Top="22"  Canvas.Left="13" Width="88" Height="89"/>
        <Border Canvas.Top="140" Canvas.Left="13" Width="88" Height="89"/>

        <!--CPU Name-->
        <TextBlock Canvas.Top="8" Canvas.Left="16" Text="{Binding Cpu.Name}" FontSize="14"/>

        <!-- CPU Logo Image-->
        <Image Canvas.Top="26" Canvas.Left="16" Width="82" Height="82"
               Source="{Binding CpuImageSource, Mode=OneWay}" Stretch="Fill"/>

        <!-- CPU stats block -->
        <Grid Canvas.Top="16" Canvas.Left="105" Width="125" Height="70">
            <Grid.RowDefinitions>
                <RowDefinition Height="18"/>
                <RowDefinition Height="18"/>
                <RowDefinition Height="18"/>
                <RowDefinition Height="18"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="60"/>
                <ColumnDefinition Width="65"/>
            </Grid.ColumnDefinitions>

            <!-- Temp -->
            <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding Cpu.Temperature}" FontSize="28"/>
            <TextBlock Grid.Row="0" Grid.Column="1" Text="°C" FontSize="16" Margin="2,2,0,0"/>

            <!-- Load -->
            <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding Cpu.Load}" FontSize="28"/>
            <TextBlock Grid.Row="1" Grid.Column="1" Text="%" FontSize="16" Margin="2,2,0,0"/>

            <!-- TDP/Power -->
            <TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding Cpu.Power}" FontSize="28"/>
            <TextBlock Grid.Row="2" Grid.Column="1" Text="W" FontSize="16" Margin="2,2,0,0"/>

            <!-- Voltage -->
            <TextBlock Grid.Row="3" Grid.Column="0" Text="{Binding Cpu.Voltage}" FontSize="28"/>
            <TextBlock Grid.Row="3" Grid.Column="1" Text="V" FontSize="16" Margin="2,2,0,0"/>
        </Grid>

        <!-- CPU Clock big -->
        <TextBlock Canvas.Top="44" Canvas.Left="105" Text="{Binding Cpu.Clock}" FontSize="54"/>
        <TextBlock Canvas.Top="55" Canvas.Left="200" Text="MHz" FontSize="18"/>

        <!-- CPU OC / BOOST ribbon (looping marquee, same place as the old small box) -->
        <Grid Canvas.Top="91" Canvas.Left="107" Width="90" Height="20">
            <local:MarqueeText
                Text="{Binding CpuOcMarqueeText}"
                FontSize="12"
                Background="Black"
                Visibility="{Binding IsCpuBoostActive, Converter={StaticResource BoolToVis}, ConverterParameter=invert}"/>
            <local:MarqueeText
                Text="{Binding CpuBoostMarqueeText}"
                FontSize="12"
                Background="Red"
                Visibility="{Binding IsCpuBoostActive, Converter={StaticResource BoolToVis}}"/>
        </Grid>

        <!-- Gpu Logo Image -->
        <Image Canvas.Top="144" Canvas.Left="16" Width="82" Height="82"
               Source="{Binding GpuImageSource, Mode=OneWay}" Stretch="Fill"/>

        <!-- GPU OC / BOOST ribbon (looping marquee, same place as the old small box) -->
        <Grid Canvas.Top="234" Canvas.Left="14" Width="88" Height="24">
            <local:MarqueeText
                Text="{Binding GpuOcMarqueeText}"
                FontSize="12"
                Background="Black"
                Visibility="{Binding IsGpuBoostActive, Converter={StaticResource BoolToVis}, ConverterParameter=invert}"/>
            <local:MarqueeText
                Text="{Binding GpuBoostMarqueeText}"
                FontSize="12"
                Background="Red"
                Visibility="{Binding IsGpuBoostActive, Converter={StaticResource BoolToVis}}"/>
        </Grid>

        <!--GPU Name-->
        <TextBlock Canvas.Top="127" Canvas.Left="16" Text="{Binding Gpu.Name}" FontSize="14"/>

        <!--GPU Temperature-->
        <TextBlock Canvas.Top="136" Canvas.Left="105" Text="{Binding Gpu.CoreTemperature}" FontSize="34"/>
        <TextBlock Canvas.Top="139" Canvas.Left="130" FontSize="18" Text="°C"/>

        <!--GPU Load-->
        <TextBlock Canvas.Top="136" Canvas.Left="170" Text="{Binding Gpu.CoreLoad}" FontSize="34"/>
        <TextBlock Canvas.Top="139" Canvas.Left="200" FontSize="18" Text="%"/>

        <!--GPU Clock-->
        <TextBlock Canvas.Top="165" Canvas.Left="105" Text="{Binding Gpu.CoreClock}" FontSize="34"/>
        <TextBlock Canvas.Top="168" Canvas.Left="165" Text="MHz" FontSize="18"/>

        <!--GPU VRam Clock-->
        <TextBlock Canvas.Top="195" Canvas.Left="125" Text="VRam Clock:" FontSize="14"/>
        <TextBlock Canvas.Top="195" Canvas.Left="190" Text="{Binding Gpu.VRamClock}" FontSize="14"/>

        <!--GPU Power-->
        <TextBlock Canvas.Top="210" Canvas.Left="125" Text="Power     :" FontSize="14"/>
        <TextBlock Canvas.Top="210" Canvas.Left="190" Text="{Binding Gpu.Power}" FontSize="14"/>

        <!-- Two overlaid graphs under POWER -->
        <Grid Canvas.Top="225" Canvas.Left="125" Width="110" Height="32"
              ClipToBounds="True" Background="Black">
            <Polyline Points="{Binding GpuPowerGraphPoints}" Stroke="White" StrokeThickness="1" SnapsToDevicePixels="True"/>
            <Polyline Points="{Binding GpuLoadGraphPoints}"  Stroke="Gray"  StrokeThickness="1" SnapsToDevicePixels="True"/>
        </Grid>


        <!--RAM Image-->
        <Image Canvas.Top="268" Canvas.Left="16" Width="90" Height="40"
               Source="{Binding MemoryImageSource, Mode=OneWay}" Stretch="Fill"/>

        <!--Total / RAM Used-->
        <TextBlock Canvas.Top="270" Canvas.Left="120" Text="Total  /  RAM Used" FontSize="14"/>

        <TextBlock Canvas.Top="285" Canvas.Left="120" Text="{Binding Memory.Total}" FontSize="20"/>
        <TextBlock Canvas.Top="285" Canvas.Left="145" Text="GB" FontSize="12"/>

        <TextBlock Canvas.Top="285" Canvas.Left="170" Text="{Binding Memory.Used}" FontSize="20"/>
        <TextBlock Canvas.Top="285" Canvas.Left="210" Text="GB" FontSize="12"/>
    </Canvas>
</UserControl>